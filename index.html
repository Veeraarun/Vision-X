<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>VR Therapy</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <a-scene>

      <!-- Preload Assets -->
      <a-assets>
        <video id="therapyVideo"
               src="assets/models/videos/WhatsApp Video 2025-05-08 at 15.33.58_ebf983c4 (1) (online-video-cutter.com).mp4"
               autoplay
               loop
               muted
               playsinline
               webkit-playsinline
               crossorigin="anonymous">
        </video>
      </a-assets>

      <!-- Initial 360 Image Background -->
      <a-sky id="sky"
             src="assets/models/shot-panoramic-composition-living-room.jpg"
             rotation="0 -90 0">
      </a-sky>

      <!-- Hidden 360 Video Background -->
      <a-videosphere id="videoSphere"
                     src="#therapyVideo"
                     visible="false"
                     rotation="0 -90 0">
      </a-videosphere>

      <!-- Start Buttons -->
      <a-box id="startBtn1"
      position="-1.5 1.5 -3"
      width="1.2"
      height="0.5"
      depth="0.1"
      color="#795548"
      opacity="0.8"
      material="shader: flat; transparent: true">
 <a-text id="startText1"
         value="Fear of Height"
         position="0 0 0.06"
         align="center"
         width="2"
         color="white">
 </a-text>
</a-box>

<a-box id="startBtn2"
      position="0 1.2 -3"
      width="1.2"
      height="0.5"
      depth="0.1"
      color="#795548"
      opacity="0.8"
      material="shader: flat; transparent: true">
 <a-text id="startText2"
         value="Fear of Accidents"
         position="0 0 0.06"
         align="center"
         width="2"
         color="white">
 </a-text>
</a-box>

<a-box id="startBtn3"
      position="1.5 1.5 -3"
      width="1.2"
      height="0.5"
      depth="0.1"
      color="#795548"
      opacity="0.8"
      material="shader: flat; transparent: true">
 <a-text id="startText3"
         value="Fear of Closed Space"
         position="0 0 0.06"
         align="center"
         width="2"
         color="white">
 </a-text>
</a-box>

      <!-- Camera & Cursor -->
      <a-camera look-controls="touchEnabled: true; magicWindowTrackingEnabled: true" position="0 1.6 0">
        <a-cursor fuse="true"
                  fuse-timeout="1000"
                  color="black"
                  geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
                  material="shader: flat">
        </a-cursor>

        <!-- Stats Panel (Attached to Camera) -->
        <a-entity id="statsPanel" position="0.8 0.8 -1.5" scale="0.5 0.5 0.5">
          <a-plane width="1.4" height="0.8" color="#000" opacity="0.6"></a-plane>
          <a-text value="Heart Rate: 78 bpm\nStress: Low\nBreathing: Normal"
                  color="#FFF" width="1.2" position="-0.65 0.3 0.01">
          </a-text>
        </a-entity>
      </a-camera>
    </a-scene>

    <!-- Floating Message -->
    <div id="message" class="message hidden">Therapy Started!</div>
    
    <!-- UI Panels -->
    <div id="statsPanel" class="panel left-panel">
      <h3>Medical Stats</h3>
      <p>Heart Rate: 78 bpm</p>
      <p>Stress Level: Low</p>
      <p>Breathing: Normal</p>
    </div>

    <div id="chatPanel" class="panel right-panel">
      <button>ChatBot</button>
    </div>

    <a-entity camera look-controls position="0 1.6 0">
      <a-entity id="statsPanel" position="-0.8 -0.3 -1.5">
        <a-plane width="1.4" height="0.8" color="#000" opacity="0.6"></a-plane>
        <a-text value="Heart Rate: 78 bpm\nStress: Low\nBreathing: Normal"
                color="#FFF" width="1.2" position="-0.65 0.3 0.01"></a-text>
      </a-entity>
    
      <a-entity id="chatBotPanel" position="0.8 -0.3 -1.5">
        <a-plane width="1.4" height="0.8" color="#111" opacity="0.6"></a-plane>
        <a-text id="chatBotText"
                value="ðŸ¤– Hi! Iâ€™m your guide.\nSay 'start' to begin."
                color="#0f0"
                width="1.2"
                position="-0.65 0.3 0.01">
        </a-text>
      </a-entity>
    
      <!-- VR cursor for gaze -->
      <a-cursor fuse="true" fuse-timeout="1000" color="black"
                geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
                material="shader: flat">
      </a-cursor>
    </a-entity>
    
    <!-- Main JS -->
    <script src="script.js"></script>
  </body>
</html>
